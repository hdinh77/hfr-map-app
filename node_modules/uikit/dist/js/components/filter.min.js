/*! UIkit 3.6.5 | https://www.getuikit.com | (c) 2014 - 2020 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitfilter",["uikit-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).UIkitFilter=e(t.UIkit.util)}(this,function(m){"use strict";function e(t){return function(t,e,n){for(var i=[[]],r=0;r<t.length;r++){var o=t[r];if(m.isVisible(o))for(var a=f(o),s=i.length-1;0<=s;s--){var u=i[s];if(!u[0]){u.push(o);break}var c=void 0;if(c=u[0].offsetParent===o.offsetParent?f(u[0]):(a=f(o,!0),f(u[0],!0)),a[e]>=c[n]-1&&a[e]!==c[e]){i.push([o]);break}if(a[n]-1>c[e]||a[e]===c[e]){u.push(o);break}if(0===s){i.unshift([o]);break}}}return i}(t,"top","bottom")}function f(t,e){var n;void 0===e&&(e=!1);var i=t.offsetTop,r=t.offsetLeft,o=t.offsetHeight,a=t.offsetWidth;return e&&(i=(n=m.offsetPosition(t))[0],r=n[1]),{top:i,left:r,bottom:i+o,right:r+a}}var r="uk-transition-leave",h="uk-transition-enter";function n(t,a,s,u){void 0===u&&(u=40);function e(t){return function(){return c===d(a)?t():m.Promise.reject()}}var c=d(a,!0),f={opacity:1},l={opacity:0},n=e(function(){return m.addClass(a,r),m.Promise.all(p(a).map(function(e,n){return new m.Promise(function(t){return setTimeout(function(){return m.Transition.start(e,l,s/2,"ease").then(t)},n*u)})})).then(function(){return m.removeClass(a,r)})}),i=e(function(){var o=m.height(a);return m.addClass(a,h),t(),m.css(m.children(a),{opacity:0}),new m.Promise(function(r){requestAnimationFrame(function(){var t=m.children(a),e=m.height(a);m.height(a,o);var n=p(a);m.css(t,l);var i=n.map(function(e,n){return new m.Promise(function(t){return setTimeout(function(){return m.Transition.start(e,f,s/2,"ease").then(t)},n*u)})});o!==e&&i.push(m.Transition.start(a,{height:e},s/2+n.length*u,"ease")),m.Promise.all(i).then(function(){m.removeClass(a,h),c===d(a)&&(m.css(a,"height",""),m.css(t,{opacity:""}),delete a.dataset.transition),r()})})})});return m.hasClass(a,r)?o(a).then(i):m.hasClass(a,h)?o(a).then(n).then(i):n().then(i)}function d(t,e){return e&&(t.dataset.transition=1+d(t)),m.toNumber(t.dataset.transition)||0}function o(t){return m.Promise.all(m.children(t).filter(m.Transition.inProgress).map(function(e){return new m.Promise(function(t){return m.once(e,"transitionend transitioncanceled",t)})}))}function p(t){return e(m.children(t)).reduce(function(t,e){return t.concat(m.sortBy(e.filter(function(t){return m.isInView(t)}),"offsetLeft"))},[])}var g,v="uk-animation-target";function i(t,n,i){!function(){if(g)return;g=!!m.append(document.head,"<style> ."+v+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        } </style>")}();var r=m.children(n),e=r.map(function(t){return y(t,!0)}),o=m.height(n);m.Transition.cancel(n),r.forEach(m.Transition.cancel),m.removeClass(n,v),w(n),t(),r=r.concat(m.children(n).filter(function(t){return!m.includes(r,t)})),m.trigger(m.toWindow(n),"resize"),m.fastdom.flush();var a,s,u,c,f,l=m.height(n),h=(a=n,u=e,c=(s=r).map(function(t,e){return!!(m.parent(t)&&e in u)&&(u[e]?m.isVisible(t)?b(t):{opacity:0}:{opacity:m.isVisible(t)?1:0})}),f=c.map(function(t,e){var n=m.parent(s[e])===a&&(u[e]||y(s[e]));return!!n&&(t?"opacity"in t||(n.opacity%1?t.opacity=1:delete n.opacity):delete n.opacity,n)}),[c,f]),d=h[0],p=h[1];return m.addClass(n,v),r.forEach(function(t,e){return p[e]&&m.css(t,p[e])}),m.css(n,{height:o,display:"block"}),new m.Promise(function(e){return requestAnimationFrame(function(){var t=r.map(function(t,e){return m.Transition.start(t,d[e],i,"ease")}).concat(m.Transition.start(n,{height:l},i,"ease"));m.Promise.all(t).then(function(){r.forEach(function(t,e){return m.css(t,"display",0===d[e].opacity?"none":"")}),w(n)},m.noop).then(e)})})}function y(t,e){var n=m.css(t,"zIndex");return!!m.isVisible(t)&&m.assign({display:"",opacity:e?m.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===n?m.index(t):n},b(t))}function w(t){m.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:"",zIndex:""}),m.removeClass(t,v),m.css(t,{height:"",display:""})}function b(t){var e=m.offset(t),n=e.height,i=e.width,r=m.position(t);return{top:r.top,left:r.left,height:n,width:i}}var t={mixins:[{props:{duration:Number,animation:String},data:{duration:150,animation:"slide"},methods:{animate:function(t,e){return void 0===e&&(e=this.$el),("fade"===this.animation?n:i)(t,e,this.duration).then(function(){return m.trigger(m.toWindow(e),"resize")},m.noop)}}}],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get:function(t,e){t.attrItem;return m.$$("["+this.attrItem+"],[data-"+this.attrItem+"]",e)},watch:function(){var e,n=this;this.updateState(),!1!==this.selActive&&(e=m.$$(this.selActive,this.$el),this.toggles.forEach(function(t){return m.toggleClass(t,n.cls,m.includes(e,t))}))},immediate:!0},children:{get:function(t,e){var n=t.target;return m.$$(n+" > *",e)},watch:function(t,e){var n,i;i=e,(n=t).length===i.length&&n.every(function(t){return~i.indexOf(t)})||this.updateState()}}},events:[{name:"click",delegate:function(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler:function(t){t.preventDefault(),this.apply(t.current)}}],methods:{apply:function(t){this.setState(s(t,this.attrItem,this.getState()))},getState:function(){var n=this;return this.toggles.filter(function(t){return m.hasClass(t,n.cls)}).reduce(function(t,e){return s(e,n.attrItem,t)},{filter:{"":""},sort:[]})},setState:function(n,i){var r=this;void 0===i&&(i=!0),n=m.assign({filter:{"":""},sort:[]},n),m.trigger(this.$el,"beforeFilter",[this,n]),this.toggles.forEach(function(t){return m.toggleClass(t,r.cls,!!function(t,e,n){var i=n.filter;void 0===i&&(i={"":""});var r=n.sort,o=r[0],a=r[1],s=k(t,e),u=s.filter;void 0===u&&(u="");var c=s.group;void 0===c&&(c="");var f=s.sort,l=s.order;void 0===l&&(l="asc");return m.isUndefined(f)?c in i&&u===i[c]||!u&&c&&!(c in i)&&!i[""]:o===f&&a===l}(t,r.attrItem,n))}),m.Promise.all(m.$$(this.target,this.$el).map(function(t){var e=m.children(t);return i?r.animate(function(){return a(n,t,e)},t):a(n,t,e)})).then(function(){return m.trigger(r.$el,"afterFilter",[r])})},updateState:function(){var t=this;m.fastdom.write(function(){return t.setState(t.getState(),!1)})}}};function k(t,e){return m.parseOptions(m.data(t,e),["filter"])}function a(t,e,n){var i,r,o=(i=t.filter,r="",m.each(i,function(t){return r+=t||""}),r);n.forEach(function(t){return m.css(t,"display",o&&!m.matches(t,o)?"none":"")});var a,s,u,c,f=t.sort,l=f[0],h=f[1];l&&(s=n,u=l,c=h,a=m.assign([],s).sort(function(t,e){return m.data(t,u).localeCompare(m.data(e,u),void 0,{numeric:!0})*("asc"===c||-1)}),m.isEqual(a,n)||m.append(e,a))}function s(t,e,n){var i=k(t,e),r=i.filter,o=i.group,a=i.sort,s=i.order;return void 0===s&&(s="asc"),(r||m.isUndefined(a))&&(o?r?(delete n.filter[""],n.filter[o]=r):(delete n.filter[o],(m.isEmpty(n.filter)||""in n.filter)&&(n.filter={"":r||""})):n.filter={"":r||""}),m.isUndefined(a)||(n.sort=[a,s]),n}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("filter",t),t});