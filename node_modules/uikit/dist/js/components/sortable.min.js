/*! UIkit 3.6.5 | https://www.getuikit.com | (c) 2014 - 2020 YOOtheme | MIT License */

!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("uikit-util")):"function"==typeof define&&define.amd?define("uikitsortable",["uikit-util"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).UIkitSortable=e(t.UIkit.util)}(this,function(p){"use strict";function e(t){return function(t,e,i){for(var n=[[]],r=0;r<t.length;r++){var o=t[r];if(p.isVisible(o))for(var s=c(o),a=n.length-1;0<=a;a--){var h=n[a];if(!h[0]){h.push(o);break}var l=void 0;if(l=h[0].offsetParent===o.offsetParent?c(h[0]):(s=c(o,!0),c(h[0],!0)),s[e]>=l[i]-1&&s[e]!==l[e]){n.push([o]);break}if(s[i]-1>l[e]||s[e]===l[e]){h.push(o);break}if(0===a){n.unshift([o]);break}}}return n}(t,"top","bottom")}function c(t,e){var i;void 0===e&&(e=!1);var n=t.offsetTop,r=t.offsetLeft,o=t.offsetHeight,s=t.offsetWidth;return e&&(n=(i=p.offsetPosition(t))[0],r=i[1]),{top:n,left:r,bottom:n+o,right:r+s}}var r="uk-transition-leave",d="uk-transition-enter";function i(t,s,a,h){void 0===h&&(h=40);function e(t){return function(){return l===f(s)?t():p.Promise.reject()}}var l=f(s,!0),c={opacity:1},u={opacity:0},i=e(function(){return p.addClass(s,r),p.Promise.all(g(s).map(function(e,i){return new p.Promise(function(t){return setTimeout(function(){return p.Transition.start(e,u,a/2,"ease").then(t)},i*h)})})).then(function(){return p.removeClass(s,r)})}),n=e(function(){var o=p.height(s);return p.addClass(s,d),t(),p.css(p.children(s),{opacity:0}),new p.Promise(function(r){requestAnimationFrame(function(){var t=p.children(s),e=p.height(s);p.height(s,o);var i=g(s);p.css(t,u);var n=i.map(function(e,i){return new p.Promise(function(t){return setTimeout(function(){return p.Transition.start(e,c,a/2,"ease").then(t)},i*h)})});o!==e&&n.push(p.Transition.start(s,{height:e},a/2+i.length*h,"ease")),p.Promise.all(n).then(function(){p.removeClass(s,d),l===f(s)&&(p.css(s,"height",""),p.css(t,{opacity:""}),delete s.dataset.transition),r()})})})});return p.hasClass(s,r)?o(s).then(n):p.hasClass(s,d)?o(s).then(i).then(n):i().then(n)}function f(t,e){return e&&(t.dataset.transition=1+f(t)),p.toNumber(t.dataset.transition)||0}function o(t){return p.Promise.all(p.children(t).filter(p.Transition.inProgress).map(function(e){return new p.Promise(function(t){return p.once(e,"transitionend transitioncanceled",t)})}))}function g(t){return e(p.children(t)).reduce(function(t,e){return t.concat(p.sortBy(e.filter(function(t){return p.isInView(t)}),"offsetLeft"))},[])}var m,v="uk-animation-target";function n(t,i,n){!function(){if(m)return;m=!!p.append(document.head,"<style> ."+v+" > * {\n            margin-top: 0 !important;\n            transform: none !important;\n        } </style>")}();var r=p.children(i),e=r.map(function(t){return b(t,!0)}),o=p.height(i);p.Transition.cancel(i),r.forEach(p.Transition.cancel),p.removeClass(i,v),y(i),t(),r=r.concat(p.children(i).filter(function(t){return!p.includes(r,t)})),p.trigger(p.toWindow(i),"resize"),p.fastdom.flush();var s,a,h,l,c,u=p.height(i),d=(s=i,h=e,l=(a=r).map(function(t,e){return!!(p.parent(t)&&e in h)&&(h[e]?p.isVisible(t)?w(t):{opacity:0}:{opacity:p.isVisible(t)?1:0})}),c=l.map(function(t,e){var i=p.parent(a[e])===s&&(h[e]||b(a[e]));return!!i&&(t?"opacity"in t||(i.opacity%1?t.opacity=1:delete i.opacity):delete i.opacity,i)}),[l,c]),f=d[0],g=d[1];return p.addClass(i,v),r.forEach(function(t,e){return g[e]&&p.css(t,g[e])}),p.css(i,{height:o,display:"block"}),new p.Promise(function(e){return requestAnimationFrame(function(){var t=r.map(function(t,e){return p.Transition.start(t,f[e],n,"ease")}).concat(p.Transition.start(i,{height:u},n,"ease"));p.Promise.all(t).then(function(){r.forEach(function(t,e){return p.css(t,"display",0===f[e].opacity?"none":"")}),y(i)},p.noop).then(e)})})}function b(t,e){var i=p.css(t,"zIndex");return!!p.isVisible(t)&&p.assign({display:"",opacity:e?p.css(t,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:"auto"===i?p.index(t):i},w(t))}function y(t){p.css(t.children,{height:"",left:"",opacity:"",pointerEvents:"",position:"",top:"",width:"",zIndex:""}),p.removeClass(t,v),p.css(t,{height:"",display:""})}function w(t){var e=p.offset(t),i=e.height,n=e.width,r=p.position(t);return{top:r.top,left:r.left,height:i,width:n}}var l,t={mixins:[{connected:function(){p.hasClass(this.$el,this.$name)||p.addClass(this.$el,this.$name)}},{props:{duration:Number,animation:String},data:{duration:150,animation:"slide"},methods:{animate:function(t,e){return void 0===e&&(e=this.$el),("fade"===this.animation?i:n)(t,e,this.duration).then(function(){return p.trigger(p.toWindow(e),"resize")},p.noop)}}}],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created:function(){var i=this;["init","start","move","end"].forEach(function(t){var e=i[t];i[t]=function(t){p.assign(i.pos,p.getEventPos(t)),e(t)}})},events:{name:p.pointerDown,passive:!1,handler:"init"},computed:{target:function(){return(this.$el.tBodies||[this.$el])[0]},items:function(){return p.children(this.target)},isEmpty:{get:function(){return p.isEmpty(this.items)},watch:function(t){p.toggleClass(this.target,this.clsEmpty,t)},immediate:!0},handles:{get:function(t,e){var i=t.handle;return i?p.$$(i,e):this.items},watch:function(t,e){p.css(e,{touchAction:"",userSelect:""}),p.css(t,{touchAction:p.hasTouch?"none":"",userSelect:"none"})},immediate:!0}},update:{write:function(){var t,e,i,n,r,o,s,a,h,l,c,u,d;this.drag&&p.parent(this.placeholder)&&(e=(t=this.pos).x,i=t.y,r=(n=this.origin).offsetTop,o=n.offsetLeft,s=this.placeholder,p.css(this.drag,{top:i-r,left:e-o}),(a=this.getSortable(document.elementFromPoint(e,i)))&&((h=a.items).some(p.Transition.inProgress)||(u={x:e,y:i},l=(c=h)[p.findIndex(c,function(t){return p.pointInRect(u,t.getBoundingClientRect())})],(!h.length||l&&l!==s)&&(this.touched.add(a),a!==(d=this.getSortable(s))&&d.remove(s),a.insert(s,function(t,e,i,n,r){var o=p.children(t);if(!o.length)return;var s=1===o.length;s&&p.append(t,i);var a=function(n){return n.some(function(t,e){var i=t.getBoundingClientRect();return n.slice(e+1).some(function(t){var e=t.getBoundingClientRect();return!C([i.left,i.right],[e.left,e.right])})})}(p.children(t));s&&p.remove(i);var h=e.getBoundingClientRect();if(!a)return r<h.top+h.height/2?e:e.nextElementSibling;var l=i.getBoundingClientRect(),c=C([h.top,h.bottom],[l.top,l.bottom]);return c&&n>h.left+h.width/2||!c&&l.top<h.top?e.nextElementSibling:e}(a.target,l,s,e,i))))))},events:["move"]},methods:{init:function(t){var e=t.target,i=t.button,n=t.defaultPrevented,r=this.items.filter(function(t){return p.within(e,t)})[0];!r||n||0<i||p.isInput(e)||p.within(e,"."+this.clsNoDrag)||this.handle&&!p.within(e,this.handle)||(t.preventDefault(),this.touched=new Set([this]),this.placeholder=r,this.origin=p.assign({target:e,index:p.index(r)},this.pos),p.on(document,p.pointerMove,this.move),p.on(document,p.pointerUp,this.end),this.threshold||this.start(t))},start:function(t){var e,i,n;this.drag=(e=this.$container,i=this.placeholder,n=p.append(e,i.outerHTML.replace(/(^<)(?:li|tr)|(?:li|tr)(\/>$)/g,"$1div$2")),p.css(n,"margin","0","important"),p.css(n,p.assign({boxSizing:"border-box",width:i.offsetWidth,height:i.offsetHeight},p.css(i,["paddingLeft","paddingRight","paddingTop","paddingBottom"]))),p.height(n.firstElementChild,p.height(i.firstElementChild)),n);var r,o,s=this.placeholder.getBoundingClientRect(),a=s.left,h=s.top;p.assign(this.origin,{offsetLeft:this.pos.x-a,offsetTop:this.pos.y-h}),p.addClass(this.drag,this.clsDrag,this.clsCustom),p.addClass(this.placeholder,this.clsPlaceholder),p.addClass(this.items,this.clsItem),p.addClass(document.documentElement,this.clsDragState),p.trigger(this.$el,"start",[this,this.placeholder]),r=this.pos,o=Date.now(),l=setInterval(function(){var t=r.x,a=r.y;a+=window.pageYOffset;var h=.3*(Date.now()-o);o=Date.now(),p.scrollParents(document.elementFromPoint(t,r.y)).reverse().some(function(t){var e=t.scrollTop,i=t.scrollHeight,n=p.offset(p.getViewport(t)),r=n.top,o=n.bottom,s=n.height;if(r<a&&a<r+35)e-=h;else{if(!(a<o&&o-35<a))return;e+=h}if(0<e&&e<i-s)return p.scrollTop(t,e),!0})},15),this.move(t)},move:function(t){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(t)},end:function(){var t,n=this;p.off(document,p.pointerMove,this.move),p.off(document,p.pointerUp,this.end),p.off(window,"scroll",this.scroll),this.drag&&(clearInterval(l),t=this.getSortable(this.placeholder),this===t?this.origin.index!==p.index(this.placeholder)&&p.trigger(this.$el,"moved",[this,this.placeholder]):(p.trigger(t.$el,"added",[t,this.placeholder]),p.trigger(this.$el,"removed",[this,this.placeholder])),p.trigger(this.$el,"stop",[this,this.placeholder]),p.remove(this.drag),this.drag=null,this.touched.forEach(function(t){var e=t.clsPlaceholder,i=t.clsItem;return n.touched.forEach(function(t){return p.removeClass(t.items,e,i)})}),this.touched=null,p.removeClass(document.documentElement,this.clsDragState))},insert:function(t,e){var i,n=this;e&&(t===e||t===e.previousElementSibling)||(p.addClass(this.items,this.clsItem),i=function(){return e?p.before(e,t):p.append(n.target,t)},this.animation?this.animate(i):i())},remove:function(t){p.within(t,this.target)&&(this.animation?this.animate(function(){return p.remove(t)}):p.remove(t))},getSortable:function(t){do{var e=this.$getComponent(t,"sortable");if(e&&(e===this||!1!==this.group&&e.group===this.group))return e}while(t=p.parent(t))}}};function C(t,e){return t[1]>e[0]&&e[1]>t[0]}return"undefined"!=typeof window&&window.UIkit&&window.UIkit.component("sortable",t),t});